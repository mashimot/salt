"use strict";!function(){function bootstrapConfig($stateProvider,$urlRouterProvider,$locationProvider){$urlRouterProvider.otherwise("/salt"),$stateProvider.state("app",{url:"/",views:{menu:{templateUrl:"menu.html"}}}).state("app.home",{url:"home",views:{"content@":{template:'<h1 class="text-danger">HOME</h1>'}}})}angular.module("app",["ui.router","ui-notification","blocks.logger","ui.bootstrap","ui.sortable","spell.checker","render.nested.html","bind.html.compile","angular.filter","collection.service","ngMessages"]).config(bootstrapConfig),bootstrapConfig.$inject=["$stateProvider","$urlRouterProvider","$locationProvider"]}(),function(){function bindHtmlCompile($compile){return{restrict:"A",link:function(scope,element,attrs){scope.$watch(function(){return scope.$eval(attrs.bindHtmlCompile)},function(value){element.html(value&&value.toString());var compileScope=scope;attrs.bindHtmlScope&&(compileScope=scope.$eval(attrs.bindHtmlScope)),$compile(element.contents())(compileScope)})}}}angular.module("bind.html.compile",[]).directive("bindHtmlCompile",bindHtmlCompile),bindHtmlCompile.$inject=["$compile"]}(),function(){function camelCase(){return{restrict:"A",scope:{ngModel:"=",applyTo:"="},link:function(scope,element,attr){scope.$watch("ngModel",function(nV,oV){void 0!==scope.ngModel&&(scope.applyTo=scope.ngModel.replace(/_([a-z])/g,function(g){return g[1].toUpperCase()}))})}}}angular.module("app").directive("camelCase",camelCase),camelCase.$inject=[]}(),angular.module("render.nested.html",[]).directive("renderNestedHtml",function(){return{compile:function(element,attrs){var rawHtml=element[0].innerHTML,code=angular.element("<pre></pre>");code.text(rawHtml),element.replaceWith(code)}}}),function(){function sumValidation(){return{require:"ngModel",restrict:"A",scope:{sumBeEqualTo:"="},link:function(scope,element,attr,ngModel){ngModel.$validators.isSumEqualsTo=function(value){var arrValues=value.replace(/ +/g," ").split(" ");if(0<arrValues.length){for(var sum=0,i=0;i<arrValues.length;i++){var num=parseInt(arrValues[i]);sum+=num}return sum===scope.sumBeEqualTo}return!1}}}}angular.module("app").directive("sumValidation",sumValidation),sumValidation.$inject=[]}(),angular.module("collection.service",[]).service("CollectionService",function(){this.sortBy=function(key,reverse){var moveSmaller=reverse?1:-1,moveLarger=reverse?-1:1;return function(a,b){return a[key]<b[key]?moveSmaller:a[key]>b[key]?moveLarger:0}},this.getKeyAndValue=function(array){for(var keys=[],values=[],tam=array.length,i=0;i<tam;i++)keys.push(i),values.push(array[i]);return{keys:keys,values:values}},this.createGroupedArray=function(arr,chunkSize){var i,groups=[];for(i=0;i<arr.length;i+=chunkSize)groups.push(arr.slice(i,i+chunkSize));return groups}}),function(){function DominioService($http){return{getDominio:function(dscDominio){return $http.get("http://devemetodo.unisa.br/dominio/dominioAPI/"+dscDominio).then(function(result,status,headers,config){return console.log(result),result})}}}angular.module("app").factory("DominioService",DominioService),DominioService.$inject=["$http"]}(),function(){function LanguageToolService($http){return{getCorrectWord:function(text){return $http({method:"GET",url:"https://languagetool.org/api/v2/check",params:{language:"pt-BR",text:text},cache:!1,headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(result,status,headers,config){if(200===result.status){var matches=result.data.matches;return{text:text,langTool:{matches:matches}}}}).catch(function(result){})}}}angular.module("app").factory("LanguageToolService",LanguageToolService),LanguageToolService.$inject=["$http"]}(),function(){function Logger($log,Notification){return{showToasts:!0,error:function(message,title,data){Notification.error({message:message,title:title}),$log.error("Error: "+message,data)},info:function(message,title,data){Notification.info({message:message,title:title}),$log.info("Info: "+message,data)},success:function(message,title,data){Notification.success({message:message,title:title}),$log.info("Success: "+message,data)},warning:function(message,title,data){Notification.warning({message:message,title:title}),$log.warn("Warning: "+message,data)},log:$log.log}}angular.module("blocks.logger",[]).service("Logger",Logger),Logger.$inject=["$log","Notification"]}(),function(){function RenderHtml(){var name="",nullable=!1,labelName="",inputType="",fields=[],htmlData="",imgSrc="",text="",elements=[];return{render:function(tblData,frameworkName){for(var partialView="",type=null,i=0;i<tblData.length;i++){var d=tblData[i];setParams(d),type=getByType(frameworkName),partialView+=type[inputType]}return partialView},setParams:setParams,get:function(){return{html:""+htmlData,legend:"<legend>"+text+"</legend>",h1:"<h1>"+text+"</h1>",h2:"<h2>"+text+"</h2>",h3:"<h3>"+text+"</h3>",h4:"<h4>"+text+"</h4>",h5:"<h5>"+text+"</h5>",h6:"<h6>"+text+"</h6>",table:'<table class="table">\n                        '+fields.map(function(field,key){return"<tr>"+Object.keys(fields[0]).map(function(f,k){return"<td>"+field[f]+"</td>"}).join("")+"</tr>"}).join("")+"\n                    </table>",image:'<img src="'+imgSrc+'" class="img-fluid">',textarea:"\n                    \x3c!-- start "+name+' --\x3e\n                    <div class="form-group" id="div_'+name+'">\n                        <label for="txt_'+name+'">'+labelName+'</label>\n                        <textarea class="form-control" name="'+name+'" id="txt_'+name+'"  '+(nullable?"":"required")+"></textarea>\n                    </div>\n                    \x3c!-- end "+name+" --\x3e\n                    ",select:"\n                    \x3c!-- start "+name+' --\x3e\n                    <div class="form-group" id="div_'+name+'">\n                        <label for="i_'+name+'">'+labelName+'</label>\n                        <select class="form-control" name="'+name+'" id="i_'+name+'"  '+(nullable?"":"required")+'>\n                            <option value="">Selecione</option>\n                            '+elements.map(function(element){return'<option value="'+element.value+'">'+element.text+"</option>"}).join("")+"\n                        </select>\n                    </div>\n                    \x3c!-- "+name+" --\x3e",checkbox:"\n                    \x3c!-- start "+name+' --\x3e\n                    <div class="form-group" id="div_'+name+'">\n                        <label for="i_'+name+'">'+labelName+"</label>\n                        "+elements.map(function(element){return'<div class="checkbox"><label><input type="checkbox" name="'+name+'" value="'+element.value+'"> '+element.text+"</label></div>"}).join("")+"\n                    </div>\n                    \x3c!-- end "+name+" --\x3e",radio:"\n                    \x3c!-- start "+name+' --\x3e\n                    <div class="form-group" id="div_'+name+'">\n                        <label for="i_'+name+'">'+labelName+"</label>\n                        "+elements.map(function(element){return'<div class="radio"><label><input type="radio" name="'+name+'" value="'+element.value+'"> '+element.text+"</label></div>"}).join("")+"\n                    </div>\n                    \x3c!-- end "+name+" --\x3e",text:"\n                    \x3c!-- start "+name+' --\x3e\n                    <div class="form-group" id="div_'+name+'">\n                        <label for="i_'+name+'">'+labelName+'</label>\n                        <input type="text" class="form-control" name="'+name+'" id="i_'+name+'" value=""  '+(nullable?"":"required")+">\n                    </div>                \n                    \x3c!-- end "+name+" --\x3e",number:"\n                    \x3c!-- start "+name+' --\x3e\n                    <div class="form-group" id="div_'+name+'">\n                        <label for="i_'+name+'">'+labelName+'</label>\n                        <input type="number" class="form-control" name="'+name+'" id="i_'+name+'" value="" '+(nullable?"":"required")+">\n                    </div>                    \n                    \x3c!-- end "+name+" --\x3e",date:"\n                    \x3c!-- start "+name+' --\x3e\n                    <div class="form-group" id="div_'+name+'">\n                        <label for="i_'+name+'">'+labelName+'</label>\n                        <input type="date" class="form-control" name="'+name+'" id="i_'+name+'" value="" '+(nullable?"":"required")+">\n                    </div>\n                    \x3c!-- end "+name+" --\x3e"}[inputType]}};function setParams(d){name=void 0===d.table.columnName?"":d.table.columnName,nullable=void 0===d.table.nullable?"":d.table.nullable,labelName=void 0===d.html.label?"":d.html.label,htmlData=void 0===d.html.data?"":d.html.data,imgSrc=void 0===d.html.src?"":d.html.src,inputType=void 0===d.html.tag?"":d.html.tag,text=void 0===d.html.text?"":d.html.text,fields=void 0===d.html.fields?[]:d.html.fields,elements=void 0===d.html.elements?[]:d.html.elements}}angular.module("app").factory("RenderHtml",RenderHtml),RenderHtml.$inject=[]}(),function(){function renderView($http,$location){var url="http://devemetodo.unisa.br/teste";return{getView:function(bigAssJson){return $http({method:"POST",url:url+"/getView",headers:{"Content-Type":"application/x-www-form-urlencoded"},params:{bigAssJson:JSON.stringify(bigAssJson)}}).then(function(result,status,headers,config){if(200===result.status)return result.data}).catch(function(result){})},show:function(bigAssJson){return $http({method:"GET",url:url+"/show",headers:{"Content-Type":"application/json; charset=utf-8"},params:{bigAssJson:JSON.stringify(bigAssJson)}}).then(function(result,status,headers,config){return result.data}).catch(function(result){})}}}angular.module("app").service("renderView",renderView),renderView.$inject=["$http","$location"]}();var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var CreateTableToJson=function(){function CreateTableToJson(){var string=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",dbType=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"oracle";_classCallCheck(this,CreateTableToJson),this._string=string,this._nullable=!1,this._isPrimaryKey=!1,this._inputType="",this._columnName="",this._labelName="",this._dataType="",this._size="",this._index=2,this._data=[],this._errors=[],this._dataBase=this.getAllowedTypes()[dbType],this._customLabel=this.getCustomLabelName()}return _createClass(CreateTableToJson,[{key:"getDataTypeAndSize",value:function(str){var dataType,inputType,secondMatch=str[1],size="",hasValBtwParen=secondMatch.match("\\((.*)\\)");if(null!==hasValBtwParen)dataType=secondMatch.replace(hasValBtwParen[0],"");else{if(2<str.length){var thirdMatch=str[2];"("===thirdMatch.charAt(0)&&null!==(hasValBtwParen=thirdMatch.match("\\((.*)\\)"))&&(this._index=3)}dataType=secondMatch}if(null!==hasValBtwParen){var n=hasValBtwParen[1];-1!==n.indexOf(".")||-1!==n.indexOf(",")?this.isFloat(n)||this._errors.push({message:"`"+this._columnName+"`: "+n+" is not a number!"}):this.isInt(n)||this._errors.push({message:"`"+this._columnName+"`: "+n+" is not a number!"}),size=n}var database=this._dataBase[dataType.toUpperCase()];void 0!==database&&""!==dataType?inputType=database:this._errors.push({message:"`"+dataType+"` does not exists! "+this._columnName}),this._dataType=dataType,this._inputType=inputType,this._size=size}},{key:"validateSyntax",value:function(stringArr){for(var value="",allowed={not:{next:["null"],previous:[],correct:"not null"},null:{next:[],previous:[],correct:"null"},primary:{next:["key"],previous:[],correct:"primary key"},key:{next:[],previous:["primary"],correct:"primary key"}},i=this._index;i<stringArr.length;i++){var currentStr=stringArr[i].replace(/,/g,""),hasError=!1,nextValue="",prevValue="";if(void 0===allowed[currentStr])this._errors.push({message:"You have an error in your SQL syntax: "+this._columnName+" - "+currentStr});else{var index=i+1;i===stringArr.length-1&&(index=stringArr.length-1);var nextString=stringArr[index],prevString=stringArr[i-1];0<allowed[currentStr].next.length&&(-1!==nextString.indexOf(allowed[currentStr].next[0])||(nextValue=allowed[currentStr].next[0],hasError=!0)),0<allowed[currentStr].previous.length&&(-1!==prevString.indexOf(allowed[currentStr].previous[0])||(prevValue=allowed[currentStr].previous[0],hasError=!0)),value+=prevValue+" "+currentStr+" "+nextValue,hasError&&""!==value&&this._errors.push({message:"error: `"+currentStr+"` maybe `"+allowed[currentStr].correct+"` ? at line: "+this._columnName+" "})}}value=value.replace(/\s\s+/g," ").trim(),this._nullable=-1!==value.indexOf("not null"),this._isPrimaryKey=-1!==value.indexOf("primary key"),this._index=2}},{key:"convert",value:function(){for(var split=this._string.trim().split("\n"),i=0;i<split.length&&this._errors.length<=0;){var stringArr=split[i].toLowerCase().replace(/\s\s+/g," ").trim().split(" ");if(stringArr.length<=1)this._errors.push({message:"Incompleted"});else{var lastStrIndex=stringArr.length-1;stringArr[lastStrIndex]=stringArr[lastStrIndex].replace(/,/g,""),""===stringArr[lastStrIndex]&&stringArr[lastStrIndex].length<=0&&stringArr.splice(lastStrIndex,1),this._columnName=stringArr[0],"create"===this._columnName&&"table"===stringArr[1]?this._data.name=stringArr[2]:(this.getDataTypeAndSize(stringArr),this.validateSyntax(stringArr),this.customInput(),this.customLabelName(),this._data.push({html:{category:"form",tag:this._inputType,label:this._labelName},table:{isPrimaryKey:this._isPrimaryKey,columnName:this._columnName,type:this._dataType,nullable:this._nullable,size:this._size}}))}i++}}},{key:"customLabelName",value:function(){var splitColumnName=this._columnName.split("_");if(0<splitColumnName.length){for(var i=0;i<splitColumnName.length;i++){var currentPartialName=splitColumnName[i],value=this._customLabel[currentPartialName];void 0!==value&&(currentPartialName=value),splitColumnName[i]=currentPartialName.charAt(0).toUpperCase()+currentPartialName.substr(1)}this._labelName=splitColumnName.join(" ").trim()}}},{key:"customInput",value:function(){-1!==this._columnName.indexOf("ind_")&&(this._inputType="select"),"text"!==this._inputType&&"textarea"!==this._inputType||(parseInt(this._size)<=50?this._inputType="text":this._inputType="textarea")}},{key:"getAllowedTypes",value:function(){return{mysql:{INT:"TEXT",SMALLINT:"TEXT",TINYINT:"TEXT",MEDIUMINT:"TEXT",BIGINT:"TEXT",FLOAT:"NUMBER",DOUBLE:"NUMBER",DECIMAL:"NUMBER",CHAR:"TEXT",VARCHAR:"TEXT",TEXT:"TEXT",MEDIUMTEXT:"TEXT",LONGTEXT:"TEXT",BINARY:"TEXT",DATE:"TEXT",TIME:"TEXT",DATETIME:"TEXT",TIMESTAMP:"TEXT"},oracle:{CHAR:"text",NCHAR:"text",VARCHAR2:"textarea",VARCHAR:"textarea",NVARCHAR2:"textarea",INTEGER:"text",LONG:"text",NUMBER:"text",DATE:"date",INTERVAL:"text",TIMESTAMP:"date"}}}},{key:"getData",value:function(){return this._data}},{key:"getString",value:function(){return this._string}},{key:"getError",value:function(){return this._errors}},{key:"getCustomLabelName",value:function(){return{dat:"Data",qtd:"Quantidade",cod:"Código",dsc:"Descrição",ind:"",usu:"Usuário",tpo:"Tipo",nom:"Nome",est:"Estado",acao:"Ação",psv:"Processo Seletivo",per:"Porcentagem",abv:"Abreviatura",obs:"Observação",num:"Número",usuario:"Usuário",docto:"Documento",doc:"Documento",val:"Valor",sta:"Status",config:"Configuração",inicio:"Ínicio",termino:"Término",situacao:"Situação",nivel:"Nível"}}},{key:"hasError",value:function(){return 0<this._errors.length}},{key:"isInt",value:function(val){if(!/^-?\d+$/.test(val))return!1;var intVal=parseInt(val,10);return parseFloat(val)==intVal&&!isNaN(intVal)}},{key:"isFloat",value:function(val){return!!/^-?\d+(?:[.,]\d*?)?$/.test(val)&&(val=parseFloat(val),!isNaN(val))}}]),CreateTableToJson}(),BootstrapGridSystem=function(){function BootstrapGridSystem(){var data=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],grid=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"4 4 4";_classCallCheck(this,BootstrapGridSystem),this._data=data,this._grid=grid,this._page=[]}return _createClass(BootstrapGridSystem,[{key:"convert",value:function(){for(var groups=[],grid=this._grid.replace(/ +/g," ").trim(),chunkSize=grid.split(" ").length,page={rows:[],name:"Page 1"},i=0;i<this._data.length;i+=chunkSize)groups.push(this._data.slice(i,i+chunkSize));this._page=groups.reduce(function(acc,group,index){return page.rows.push({grid:grid,columns:[]}),group.map(function(data,i){return 0,page.rows[index].columns.push({contents:[data]})},0),page},0);var lastRow=this._page.rows.length,columns=this._page.rows[lastRow-1].columns;if(columns.length<chunkSize)for(var k=columns.length;k<chunkSize;k++)this._page.rows[lastRow-1].columns.push({contents:[]})}},{key:"getPage",value:function(){return this._page}}]),BootstrapGridSystem}();!function(){function createTableToJson(){return{templateUrl:"create-table-to-json/create-table-to-json.html",scope:{pages:"="},controller:controller,controllerAs:"vm",bindToController:!0}}function controller($scope,Logger){var vm=this;vm.pages=$scope.pages,vm.grid="4 4 4",vm.createTableString="supplier_id number(10) NOT NULL  ,\nsupplier_name varchar2(50) NOT NULL,\naddress varchar2(50),\ncity varchar2(50),\nstate varchar2(25),\ndat_now date,\nzip_code varchar2(10)\n",vm.createTable=function(string,isFormValid){if(vm.errors=[],isFormValid){var createTableToJson=new CreateTableToJson(string,vm.options.database);if(createTableToJson.convert(),createTableToJson.hasError())vm.errors=createTableToJson.getError();else{var data=createTableToJson.getData(),bootstrapGrid=new BootstrapGridSystem(data,vm.grid);bootstrapGrid.convert();var page=bootstrapGrid.getPage();vm.pages.push(page),console.log(vm.pages),Logger.success("New Data successfully created!")}}else Logger.error("Oops! please fill in all required fields!")},vm.database=["oracle"],vm.options={database:"oracle"}}angular.module("app").directive("createTableToJson",createTableToJson),createTableToJson.$inject=["Logger"]}(),function(){function SqlToModel($timeout){return{templateUrl:"create-table-to-mvc/create-table-to-model/model.html",restrict:"E",scope:{pages:"=vmPages",model:"="},link:function(scope,element,attr){scope.$watch("pages",function(pages){var pk=[],fillable="";if(0<pages.length&&void 0!==pages.length)for(var k=0;k<pages.length;k++){var rows=pages[k].rows;if(0<rows.length)for(var i=0;i<rows.length;i++){var columns=rows[i].columns;if(0<columns.length)for(var j=0;j<columns.length;j++){var contents=columns[j].contents;if(0<contents.length)for(var m=0;m<contents.length;m++){var d=contents[m];if(d.table&&0<Object.keys(d.table).length){var columnName=d.table.columnName,isPrimaryKey=d.table.isPrimaryKey;fillable+="\n\t'"+columnName+"',",void 0!==isPrimaryKey&&isPrimaryKey&&(pk.push(columnName),scope.model.sequenceName="sga_"+columnName+"_seq")}}}}}pk.length<=0&&(scope.model.sequenceName=""),scope.model.primaryKey=pk,scope.model.fillable=fillable},!0)},controller:function($scope){$scope.model={primaryKey:[],sequenceName:"",name:"",tableName:"",listNames:[]},$scope.model.name="$scope.table.name",$scope.model.tableName="$scope.table.name"}}}angular.module("app").directive("sqlToModel",SqlToModel),SqlToModel.$inject=["$timeout"]}(),function(){function SqlToView(RenderHtml,renderView){return{templateUrl:"create-table-to-mvc/create-table-to-view/view.html",restrict:"E",scope:{pages:"=vmPages",view:"="},controller:function($scope){$scope.content="",$scope.view={name:"",title:""}},link:function(scope,elem,attr){scope.$watch("pages",function(pages){var fullHtml="";if(0<pages.length&&void 0!==pages.length)for(var k=0;k<pages.length;k++){var pageHtml="",rowHtml="",rows=pages[k].rows;if(0<rows.length)for(var i=0;i<rows.length;i++){var row=rows[i],columns=row.columns,grid=row.grid.split(" "),columnHtml="";if(0<columns.length)for(var j=0;j<columns.length;j++){var column=columns[j],contents=column.contents,dataHtml="";if(0<contents.length)for(var m=0;m<contents.length;m++){var d=contents[m];RenderHtml.setParams(d),dataHtml+="\n\t\t\t"+RenderHtml.get()}columnHtml+='\n\t\t<div class="col-md-'+grid[j]+'">'+dataHtml+"\n\t\t</div>"}rowHtml+='\n\t<div class="row">'+columnHtml+"\n\t</div>"}fullHtml+=pageHtml+='\n<section class="page-'+(k+1)+'">'+rowHtml+"\n</section>"}scope.content=fullHtml},!0)}}}angular.module("app").directive("sqlToView",SqlToView),SqlToView.$inject=["RenderHtml","renderView"]}(),angular.module("app").directive("sqlToController",function(){return{templateUrl:"create-table-to-mvc/create-table-to-controller/controller.html",restrict:"E",scope:{pages:"=vmPages",controller:"="},link:function(scope,element,attr){scope.validation=[],scope.controller={name:"Controller"},scope.$watch("pages",function(pages){var validation="",rules="",inputNiceNames="";if(0<pages.length&&void 0!==pages.length)for(var k=0;k<pages.length;k++){var rows=pages[k].rows;if(0<rows.length)for(var i=0;i<rows.length;i++){var columns=rows[i].columns;if(0<columns.length)for(var j=0;j<columns.length;j++){var contents=columns[j].contents;if(0<contents.length)for(var m=0;m<contents.length;m++){var d=contents[m];if(d.table&&0<Object.keys(d.table).length){var name=d.table.columnName,nullable=d.table.nullable,size=d.table.size,dataType=d.table.type,labelName=d.html.label,required="nullable",addComment="",maxlength="",isNumber="",isDate="";0<size&&("number"===dataType?(isNumber="|numeric",maxlength="|digits_between:1,"+size):maxlength="|max:"+size),"date"===dataType&&(isDate='|date_format:"d/m/Y"'),nullable&&(required="required",addComment=""),rules+="\t"+addComment+"'"+name+"' => '"+required+isDate+isNumber+maxlength+"',\n",inputNiceNames+="\t'"+name+"' => '"+labelName+"',\n"}}}}}validation="\n                        $inputNiceNames = [\n                            "+inputNiceNames+"\n                        ];   \n                        $rules = [\n                            "+rules+"\n                        ];\n                    ",scope.validation=validation},!0)},controller:controller};function controller(){return{name:"Controller"}}}),function(){function FormBuilderController($scope,DominioService,HtmlElementsService,formDataService){var vm=this;vm.preview="",vm.pages=[],vm.pages.push(formDataService.getFormData()),vm.loading=!1,vm.tags=function(htmlElements){for(var tools=HtmlElementsService.getHtmlElements(),tags=[],i=0;i<tools.length;i++){var tool=tools[i],category=tool.html.category;"form"===category&&tags.push(tool.html.tag)}return tags}(),vm.tools=HtmlElementsService.getHtmlElements(),vm.dominio={error:{has:!1,msg:""},data:[]},vm.buscaDominio=function(columnName){3<columnName.length&&void 0!==columnName&&(vm.loading=!0,vm.dominio.error.has=!1,vm.dominio.data=[],DominioService.getDominio(columnName).then(function(result){null!==result.data&&200===result.status&&(0<result.data.length?vm.dominio.data=result.data:(vm.dominio.error.has=!0,vm.dominio.error.msg="No data found!")),vm.loading=!1}).catch(function(result){null===result.data&&(vm.dominio.error.has=!0,vm.dominio.error.msg="An error occurred!"),vm.loading=!1}))},vm.database=(new CreateTableToJson).getAllowedTypes().oracle}angular.module("app").controller("FormBuilderController",FormBuilderController),FormBuilderController.$inject=["$scope","DominioService","HtmlElementsService","formDataService"]}(),function(){function routeConfig($stateProvider,$urlRouterProvider,$locationProvider){$stateProvider.state("app.salt",{url:"salt",views:{menu:{templateUrl:"menu.html"},"content@":{templateUrl:"form-builder/form-builder.html"}}})}angular.module("app").config(routeConfig),routeConfig.$inject=["$stateProvider","$urlRouterProvider","$locationProvider"]}(),function(){function FormColumnController($scope){var vmPage=$scope.vmPage;this.columnSortable={placeholder:"card px-1 py-1 mt-1 border border-primary ui-placeholder-highlight",handle:".column-handle",start:function(event,ui){ui.placeholder.addClass(ui.item.attr("class"))},update:function(event,ui){var s=ui.item.sortable,n_pos=s.dropindex,o_pos=s.index,grid=event.target.attributes["data-bootstrap-grid"].nodeValue.trim(),rowIndex=event.target.attributes["data-row-index"].nodeValue,pageNumber=event.target.attributes["data-page-number"].nodeValue,arrGrid=grid.split(" "),aux1=arrGrid[n_pos],aux2=arrGrid[o_pos];arrGrid[n_pos]=aux2,arrGrid[o_pos]=aux1;var newGrid=arrGrid.join(" ");console.log(newGrid),grid!==newGrid&&(vmPage.pages[pageNumber].rows[rowIndex].grid=newGrid)},stop:function(event,ui){ui.placeholder.removeClass(),Logger.success("Column successfully updated!")}}}angular.module("app").controller("FormColumnController",FormColumnController),FormColumnController.$inject=["$scope"]}(),function(){function formColumns(Logger){return{restrict:"E",require:"^form-rows",templateUrl:"form-builder/form-columns/form-columns.html",controller:"FormColumnController",controllerAs:"vmColumn",bindToController:!0}}angular.module("app").directive("formColumns",formColumns),formColumns.$inject=["Logger"]}(),function(){function FormContentController(Logger){this.showOptions=-1,this.deleteContent=function(column,contentindex){column.contents.splice(contentindex,1)},this.contentSortable={connectWith:".connected-drop-target-sortable",placeholder:"px-1 py-1 mt-1 bg-primary text-white ",handle:".content-handle",opacity:.3,cancel:".unsortable",stop:function(event,ui){Logger.success("Data successfully updated!")}}}angular.module("app").controller("FormContentController",FormContentController),FormContentController.$inject=["Logger"]}(),function(){function formData(){return{restrict:"E",require:"^form-columns",templateUrl:"form-builder/form-contents/form-contents.html",controller:"FormContentController",controllerAs:"vmContent",bindToController:!0}}angular.module("app").directive("formData",formData),formData.$inject=[]}(),function(){function FormMenuController($scope,RenderHtml){var vmMenu=this;vmMenu.pageModel=[{rows:[],name:"Page Name "}],vmMenu.bootstrap=[{grid:"6 6",columns:[]}],vmMenu.grids=[{grid:"6 6",columns:[]},{grid:"4 4 4",columns:[]},{grid:"3 3 3 3",columns:[]},{grid:"2 2 4 2 2",columns:[]},{grid:"12",columns:[]}],vmMenu.newFile=function(){vmMenu.pages=new Array},vmMenu.newPage=function(){vmMenu.pages.push({rows:[],name:"Page Name "+(vmMenu.pages.length+1)})},vmMenu.newPageSortable={placeholder:"card px-1 py-1 mb-1 bg-primary text-white",connectWith:".connected-pages",update:function(event,ui){vmMenu.pageModel=angular.copy([{rows:[],name:"Page Name "}])}},vmMenu.gridSortable={connectWith:".connected-bootstrap-grid",placeholder:"card px-1 py-1 bg-primary text-white",update:function(event,ui){var textWithoutExtraWhiteSpaces=ui.item.sortable.model.grid.replace(/ +/g," ").trim(),arrNumbers=textWithoutExtraWhiteSpaces.split(" "),columns=[];if(0<arrNumbers.length){for(var i=0;i<arrNumbers.length;i++)columns.push({contents:[]});var updateModel=ui.item.sortable.model;updateModel.grid=textWithoutExtraWhiteSpaces,updateModel.columns=columns}vmMenu.bootstrap=[{grid:"6 6",columns:[]}]}},vmMenu.toolSortable={connectWith:".connected-drop-target-tool",placeholder:"card px-1 py-1 mt-1 bg-primary text-white",handle:".tool-handle",start:function(event,ui){if(ui.item.startHtml=ui.item.html(),void 0!==ui.item.sortable.model.html.tag){var model=ui.item.sortable.model;RenderHtml.setParams(model);var html=RenderHtml.get();ui.item.removeClass().css("background-color",""),ui.item.html("<div class='row'><div class='px-3 py-3 bg-white border border-primary' style='opacity: 0.9; width: 100%; color: black;'>"+html+"</div></div>"),ui.helper.css("width","120%")}},stop:function(event,ui){vmMenu.tools=angular.copy(vmMenu.tools);var currentModel=ui.item.sortable.model;if("form"===currentModel.html.category){var columnName=currentModel.table.columnName,uid=(new Date).valueOf().toString(36);void 0!==columnName&&""!==columnName||(currentModel.table.columnName="name"+uid)}ui.item.html(ui.item.startHtml)}}}angular.module("app").controller("FormMenuController",FormMenuController),FormMenuController.$inject=["$scope","RenderHtml"]}(),function(){function formMenu(){return{restrict:"EA",templateUrl:"form-builder/form-menu/form-menu.html",scope:{pages:"=pages",tools:"="},controller:"FormMenuController",controllerAs:"vmMenu",bindToController:!0}}angular.module("app").directive("formMenu",formMenu),formMenu.$inject=[]}(),function(){function FormPageController($scope,Logger){var vmPage=this;vmPage.editPageName={},vmPage.sortablePage={placeholder:"px-1 py-1 mb-1 bg-primary text-white"},vmPage.deletePage=function(index){vmPage.pages.splice(index,1)}}angular.module("app").controller("FormPageController",FormPageController),FormPageController.$inject=["$scope","Logger"]}(),function(){function formPages(Logger,formDataService){return{restrict:"E",templateUrl:"form-builder/form-pages/form-pages.html",scope:{pages:"="},controller:"FormPageController",controllerAs:"vmPage",bindToController:!0}}angular.module("app").directive("formPages",formPages),formPages.$inject=["Logger","formDataService"]}(),function(){function FormRowController(Logger){this.sortableRowBetweenPage={connectWith:".connect-page-row",placeholder:"px-1 py-1 mt-1 bg-primary text-white",handle:".row-handle",stop:function(){Logger.success("Row successfully updated!")}}}angular.module("app").controller("FormRowController",FormRowController),FormRowController.$inject=[]}(),function(){function formRows(Logger){return{restrict:"E",templateUrl:"form-builder/form-rows/form-rows.html",require:"^form-pages",controller:"FormRowController",controllerAs:"vmRow",bindToController:!0}}angular.module("app").directive("formRows",formRows),formRows.$inject=["Logger"]}(),function(){function editFormBuilderData($uibModal,TabService){return{restrict:"EA",scope:{data:"=data",typeEvent:"@"},link:function(scope,elem,attr){function template(){return'\n        <div class="modal-header">\n            <h1>Preview</h1>\n        </div>\n        <div class="modal-body">\n            <div class="card">\n                <div class="card-header">\n                    <render-content data="content"></render-content>\n                </div>\n                <div class="card-body">\n                    <form name="editModal" ng-submit="ok(editModal.$valid)" method="post">\n                        <div ng-repeat="(i, tab) in render.tabs" class="py-2">\n                            <h4 ng-bind="tab.title" class="px-3 py-2 bg-danger text-white"></h4>\n                            <span bind-html-compile="tab.template"></span>\n                        </div>\n                        <button type="submit" class="btn btn-primary" >OK</button>\n                        <button class="btn btn-warning" ng-click="cancel()">Cancel</button>                        \n                    </form>\n                </div>\n            </div>\n        </div>'}function ConfigModalController($scope,$uibModalInstance,render,data,typeEvent){var isChanged=!1;$scope.content=angular.copy(data),$scope.typeEvent=typeEvent,$scope.render=render,$scope.cancel=function(){$uibModalInstance.dismiss()},$scope.ok=function(isFormValid){isChanged&&isFormValid&&"edit"===$scope.typeEvent&&(update={success:!0,content:$scope.content},$uibModalInstance.close(update));var update;isChanged||"edit"===$scope.typeEvent&&$uibModalInstance.dismiss()},$scope.$watch("content",function(newValue,oldValue){isChanged=!angular.equals(newValue,angular.copy(data))},!0)}elem.on("click",function(){var render=TabService.render(),tag=scope.data.html.tag;scope.render=render[tag],scope.content=scope.data,function(content,_typeEvent){var render=TabService.render(),tag=content.html.tag,tabToRender=render[tag];if(void 0!==tabToRender){var modalInstance=$uibModal.open({template:template,controller:ConfigModalController,resolve:{render:function(){return tabToRender},data:function(){return content},typeEvent:function(){return _typeEvent}},backdrop:!0,keyboard:!0,backdropClick:!0,size:"lg",animation:!1});return modalInstance}}(scope.data,scope.typeEvent).result.then(function(result){result.success&&angular.copy(result.content,scope.data)})})}}}angular.module("app").directive("editFormBuilderData",editFormBuilderData),editFormBuilderData.$inject=["$uibModal","TabService"]}(),angular.module("app").service("TabService",function(){var tabs={general:{title:"General Configuration",template:'<general-tab content="content" form-name="editModal"></general-tab>'},choices:{title:"Choices",template:'<choices-tab content="content" form-name="editModal"></choices-tab>'},visibleIf:{title:"Vísivel Se",template:'<hide-when-tab content="content"></hide-when-tab>'},htmlEditor:{title:"Html Editor",template:'<html-editor content="content"></html-editor>'},title:{title:"Title",template:'<title-tab content="content" form-name="editModal"></title-tab>'},table:{title:"Table",template:'<table-builder content="content" form-name="editModal"></table-builder>'},img:{title:"Image",template:'<img-tab content="content" form-name="editModal"></img-tab>'}};this.render=function(){return{h1:{tabs:[tabs.title]},h2:{tabs:[tabs.title]},h3:{tabs:[tabs.title]},h4:{tabs:[tabs.title]},h5:{tabs:[tabs.title]},h6:{tabs:[tabs.title]},legend:{tabs:[tabs.title]},radio:{tabs:[tabs.general,tabs.choices]},checkbox:{tabs:[tabs.general,tabs.choices]},select:{tabs:[tabs.general,tabs.choices]},textarea:{tabs:[tabs.general]},text:{tabs:[tabs.general]},number:{tabs:[tabs.general]},date:{tabs:[tabs.general]},image:{tabs:[tabs.img]},html:{tabs:[tabs.htmlEditor]},table:{tabs:[tabs.table]},file:{tabs:[tabs.general]}}}}),angular.module("app").directive("choicesTab",function(CollectionService){return{templateUrl:"form-builder/modal/config/config.choices.html",scope:{content:"=content",formName:"=formName"},controller:function($scope){void 0===$scope.content.html.elements&&($scope.content.html.elements=[]),$scope.sortableElements={stop:function(){$scope.sortType=void 0,$scope.sortReverse=void 0,$scope.text.string=elementToString($scope.content.html.elements)}}},link:function(scope,element){scope.text={},scope.removeContent=function($index){scope.content.html.elements.splice($index,1),scope.text.string=elementToString(scope.content.html.elements)},scope.addElement=function(){scope.content.html.elements.push({text:"",value:""})},scope.cloneThis=function(name,elements){var elementsLength=elements.length;if(0<elementsLength){for(var cloneThisObjectName="value"===name?"text":"value",i=0;i<elementsLength;i++)elements[i][name]=elements[i][cloneThisObjectName];scope.text.string=elementToString(scope.content.html.elements)}},scope.orderBy=function(type){scope.sortType!==type&&(scope.sortReverse=!0),scope.sortReverse=!scope.sortReverse,scope.sortType=type;var sort=CollectionService.sortBy(type,scope.sortReverse);scope.content.html.elements.sort(sort),scope.text.string=elementToString(scope.content.html.elements)},scope.string=function(e,s){var string=s.split("\n");if(0<string.length){for(var newElements=[],i=0;i<string.length;i++){var str=string[i],firstMatch=str,secondMatch="";if(-1!==str.indexOf("|")){var match=str.split("|");firstMatch=match[0],secondMatch=str.substring(firstMatch.length+1)}var element={text:void 0!==firstMatch?firstMatch:"",value:void 0!==secondMatch?secondMatch:""};newElements.push(element)}scope.content.html.elements=newElements}},scope.text.string=elementToString(scope.content.html.elements),scope.elementChanged=function(e){scope.text.string=elementToString(e)}}};function elementToString(e){var string="";if(void 0!==e&&0<e.length)for(var i=0;i<e.length;i++){var str=e[i],pipe=""===str.value?"":"|";string+=(void 0!==str.text?str.text:"")+pipe+(void 0!==str.value?str.value:"")+(i===e.length-1?"":"\n")}return string}}),angular.module("app").directive("generalTab",function(){return{templateUrl:"form-builder/modal/config/config.general.html",scope:{content:"=content",formName:"=formName"},link:function(){}}}),function(){function hideWhenTab($sce){return{templateUrl:"form-builder/modal/config/is-hide-when.html",scope:{content:"="},link:function($scope){$scope.get_pre=function(x){return $sce.trustAsHtml(x)}}}}angular.module("app").directive("hideWhenTab",hideWhenTab),hideWhenTab.$inject=["$sce"]}(),function(){function htmlEditor(){return{templateUrl:"form-builder/modal/config/config.html-editor.html",scope:{content:"="},link:function($scope){}}}angular.module("app").directive("htmlEditor",htmlEditor),htmlEditor.$inject=[]}(),angular.module("app").directive("imgTab",function(){return{templateUrl:"form-builder/modal/config/config.img.html",scope:{content:"=content",formName:"=formName"},link:function(){}}}),angular.module("app").directive("tableBuilder",function(){return{templateUrl:"form-builder/modal/config/config.table-builder.html",scope:{content:"=content",formName:"=formName"},link:function(scope){scope.hasDuplicateName=!1,scope.duplicatedName="",scope.joeysWorldTour=function(){var fields=angular.copy(scope.content.html.fields);if(0<fields.length){for(var currentKeys=Object.keys(fields[0]),newFields=[],j=0;j<fields.length;j++){for(var objValues={},i=0;i<currentKeys.length;i++){var key=currentKeys[i];objValues[key]=fields[j][key]}newFields.push(objValues)}scope.content.html.fields=newFields}},scope.verifyDuplicates=function(indexToIgnore,newKey){var fields=angular.copy(scope.content.html.fields);if(0<fields.length){var currentKeys=Object.keys(fields[0]);if(0<currentKeys.length)for(var j=0;j<currentKeys.length;j++){var cKey=currentKeys[j].replace(/ +/g," ").trim().toLowerCase(),nKey=newKey.replace(/ +/g," ").trim().toLowerCase();if(indexToIgnore!==j&&cKey===nKey)return scope.hasDuplicateName=!0,scope.duplicatedName=currentKeys[j],!1}}scope.hasDuplicateName=!1},scope.newField=function(index,key,newKey){if(console.log(index),!scope.hasDuplicateName&&void 0!==newKey&&""!==newKey.trim()){var fields=angular.copy(scope.content.html.fields);if(0<fields.length){for(var i=0;i<fields.length;i++){var field=fields[i];fields[i][newKey]=field[key],delete fields[i][key]}var keysArr=Object.keys(fields[0]),lastItem=keysArr[keysArr.length-1];keysArr.splice(index,0,lastItem),scope.content.html.fields=JSON.parse(JSON.stringify(fields,keysArr))}}},scope.newLine=function(){var keys=Object.keys(scope.content.html.fields[0]);if(0<keys.length){for(var dataObj=new Object,i=0;i<keys.length;i++)dataObj[keys[i]]="";scope.content.html.fields.push(dataObj)}},scope.newColumn=function(){var fields=angular.copy(scope.content.html.fields);if(0<fields.length)for(var lastIndex=Object.keys(fields[0]).length,i=0;i<scope.content.html.fields.length;i++)scope.content.html.fields[i]["row "+(lastIndex+1)]="";else scope.content.html.fields.push({"row 1":""})},scope.deleteColumn=function(key){var fields=angular.copy(scope.content.html.fields);if(0<fields.length){for(var hasKey=!1,i=0;i<fields.length;i++){var field=fields[i],currentKeys=Object.keys(field);if(console.log(currentKeys),0<currentKeys.length)for(var j=0;j<currentKeys.length;j++)currentKeys[j]===key&&(hasKey=!0,delete scope.content.html.fields[i][key])}field=angular.copy(scope.content.html.fields);var firstField=Object.keys(field[0]).length;hasKey&&firstField<=0&&(scope.content.html.fields=[])}},scope.deleteLine=function(fieldIndex){scope.content.html.fields.splice(fieldIndex,1)}}}}),angular.module("app").directive("titleTab",function(){return{templateUrl:"form-builder/modal/config/config.title.html",scope:{content:"=",formName:"=formName"},link:function($scope){}}}),function(){function renderContent(RenderHtml){return{scope:{data:"=data"},template:'<span bind-html-compile="result()"></span>',link:function(scope){scope.result=function(){var data=scope.data;RenderHtml.setParams(data);var result=RenderHtml.get();if(void 0!==result){var required="",tag="<span class='badge badge-primary'>"+data.html.tag+"</span>";return"form"===data.html.category&&(required=data.table.nullable?"<span class='badge badge-success'>required</span>":"<span class='badge badge-danger'>not required</span>"),tag+" "+required+result}return"undefined"}}}}angular.module("app").directive("renderContent",renderContent),renderContent.$inject=["RenderHtml"]}(),function(){function formDataService($http){return{getFormData:function(){return{rows:[{grid:"12",columns:[{contents:[{html:{tag:"html",category:"html",data:'<h1 class="p-3 mb-3 bg-danger text-white text-center">A simple drag & drop Bootstrap Form Builder </h1>'},table:{}}]}]},{grid:"3 9",columns:[{contents:[{html:{tag:"image",category:"html",src:"http://i.imgur.com/AVqsATi.gif"},table:{}}]},{contents:[{html:{tag:"html",category:"html",data:'<p class="f3">This project was made with Angular 1.7.2.</p>\n<p>It\'s been in development since December 2017 and is <strong>currently being developed.</strong></p>'},table:{}}]}]}],name:"Salt - A tool for Lazy Developer"}}}}angular.module("app").factory("formDataService",formDataService),formDataService.$inject=["$http"]}(),function(){function HtmlElementsService($http){return{getHtmlElements:function(){return[{html:{label:"Type your Text",category:"form",tag:"select",elements:[{value:"Select 1",text:"Select 1"},{value:"Select 2",text:"Select 2"},{value:"Select 3",text:"Select 3"}]},table:{}},{html:{tag:"html",category:"html",data:"<h1>HTML</h1>"},table:{}},{html:{tag:"image",category:"html",src:"http://i.imgur.com/AVqsATi.gif"},table:{}},{html:{label:"Type your Text",category:"form",tag:"text"},table:{}},{html:{label:"Type your Text",category:"form",tag:"radio",elements:[{value:"Radio 1",text:"Radio 1"},{value:"Radio 2",text:"Radio 2"},{value:"Radio 3",text:"Radio 3"}]},table:{}},{html:{label:"Type your Text",category:"form",tag:"textarea"},table:{}},{html:{label:"Type your Text",category:"form",tag:"number"},table:{}},{html:{label:"Choose file",category:"form",tag:"file"},table:{}},{html:{label:"Type your Text",category:"form",tag:"date"},table:{}},{html:{label:"Type your Text",category:"form",tag:"checkbox",elements:[{value:"Checkbox 1",text:"Checkbox 1"},{value:"Checkbox 2",text:"Checkbox 2"},{value:"Checkbox 3",text:"Checkbox 3"}]},table:{}},{html:{label:"Type your Text",category:"headings",tag:"h1",text:"Add Your Title",class:"text-center"},table:{}},{html:{category:"headings",tag:"h2",text:"Add Your Title",class:"text-center"},table:{}},{html:{category:"headings",tag:"h3",text:"Add Your Title",class:"text-center"},table:{}},{html:{category:"headings",tag:"h4",text:"Add Your Title",class:"text-center"},table:{}},{html:{category:"headings",tag:"h5",text:"Add Your Title",class:"text-center"},table:{}},{html:{category:"headings",tag:"h6",text:"Add Your Title",class:"text-center"},table:{}},{html:{category:"formatting",tag:"legend",text:"Legend text"},table:{}},{html:{category:"table",tag:"table",fields:[{"Book Name":"Computer Architecture",Category:"Computers",Price:"125.60","Book ID":"1"},{"Book ID":"2","Book Name":"Asp.Net 4 Blue Book",Category:"Programming",Price:"56.00"},{"Book ID":"3","Book Name":"Popular Science",Category:"Science",Price:"210.40"}]},table:{}}]}}}angular.module("app").factory("HtmlElementsService",HtmlElementsService),HtmlElementsService.$inject=["$http"]}(),function(){function spellChecker($uibModal,LanguageToolService){return{restrict:"EA",transclude:!0,scope:{text:"="},template:'\n                <div class="input-group input-group">\n                    <input type="text" type="search" ng-model="text" class="form-control">\n                    <div class="input-group-append">\n                        <button ng-click="checkSpelling()" class="btn btn-outline-info btn-sm" type="button">\n                            <i class="fa fa-book" aria-hidden="true"></i>\n                        </button>\n                    </div>\n                </div>\n\t\t\t\t',controller:function($scope){$scope.checkSpelling=function(){$uibModal.open({templateUrl:"spell-checker/spell-checker.html",controller:SpellCheckerController,resolve:{text:function(){return $scope.text}},backdrop:!0,keyboard:!0,backdropClick:!0,size:"lg",animation:!1}).result.then(function(result){$scope.text=result})}}}}function SpellCheckerController($scope,$uibModalInstance,text,LanguageToolService){function spellChecker(){($scope.isLoading=!0,0<$scope.text.value.length)?($scope.result=[],function(){var arrOfWords=$scope.text.value.split(" ");if(0<arrOfWords.length){for(var newText=[],i=0;i<arrOfWords.length;i++){var word=arrOfWords[i].trim();word=word.charAt(0).toUpperCase()+word.slice(1),newText.push(word)}var fullText=newText.join(" ");return LanguageToolService.getCorrectWord(fullText)}}().then(function(r){$scope.result.push(r),$scope.text.value=r.text,console.log($scope.text.value),$scope.isLoading=!1})):$scope.isLoading=!1}$scope.result=[],$scope.text={value:text},spellChecker(),$scope.spellChecker=spellChecker,$scope.save=function(text){$uibModalInstance.close($scope.text.value)},$scope.cancel=function(){$uibModalInstance.dismiss()}}angular.module("spell.checker",[]).directive("spellChecker",spellChecker),spellChecker.$inject=["$uibModal","LanguageToolService"]}();